version: '3.7'

services:
  web:
    build: .
    command: python3 /code/manage.py runserver 0.0.0.0:8000
    # command: gunicorn fortune_project.wsgi -b 0.0.0.0:8000
    environment:
        - ENVIRONMENT=development
        - SECRET_KEY=qibz-etoyzayw06+&gjaa8!yz3j7)4+!f7)r@phqprb9h($$wb-
        - DJANGO_DEBUG=True
        - API_KEY=rjebIngV.iRu0QTpg5MZWxNLaP3eeosKi0zDDESWD
        - API_SECRET_KEY=rjebIngV.iRu0QTpg5MZWxNLaP3eeosKi0zDDESWD
        - DATABASE_URL_NAME=postgres
        - DATABASE_URL_USER=postgres
        - DATABASE_URL_PASSWORD=postgres
        - DATABASE_URL_HOST=db
        - TEST_KEY=NVbjpYiB.afARtfqBPV1EAyTVcK9akZBIm8v3tXdm
        - SECOND_KEY=3fidGG0P.nWaqzI4qS5KgPDeegTpK76JDxw12OeAq
        - API_URL_FSS=/oct-api/v1/
        - API_URL_CFSS=/bard-api/v1/
        - SAMESITEAPI=APOS1jji.5ciYsVauyP0tRX7GveRoNWN1uyao5zWF
    volumes:
        - .:/code
    ports:
        - 8000:8000
    depends_on:
        - db
  db:
      image: postgres:11
      volumes:
          - postgres_data:/var/lib/postgresql/data/
      environment:
          - "POSTGRES_HOST_AUTH_METHOD=trust"

volumes:
    postgres_data:
